(this["webpackJsonpless-tipsy"]=this["webpackJsonpless-tipsy"]||[]).push([[0],[,,,,,function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(0),i=s.n(n),a=function(e){var t=e.number,s=e.decimalPlaces,n=Math.pow(10,s),a=Math.round(t*n)/n;return i.a.createElement("span",null,a)}},,function(e,t,s){"use strict";var n;s.d(t,"a",(function(){return n})),function(e){e.Ounces="Ounces",e.Milliliters="Milliliter"}(n||(n={}))},function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(1),i=s(2),a=s(4),o=s(3),l=s(0),r=function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return l.createElement("div",{className:"tab-content"},this.props.children)}}]),s}(l.Component)},function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));var n,i,a=s(10),o=s(1),l=s(2);!function(e){e[e.ACCEPTED=0]="ACCEPTED",e[e.REJECTED=1]="REJECTED"}(n||(n={})),function(e){e[e.BROWSERTAB=0]="BROWSERTAB",e[e.STANDALONE=1]="STANDALONE",e[e.STANDALONEIOS=2]="STANDALONEIOS"}(i||(i={}));var r=function(){function e(){var t=this;Object(o.a)(this,e),this._deferredPrompt=null,this._installCallbacks=[],this._installAvailableCallbacks=[],this._displayModeCallbacks=[],this._installResult=n.REJECTED,this._isInstallable=!1,this._displayMode=i.BROWSERTAB,this._displayModeIsSet=!1,window.addEventListener("beforeinstallprompt",(function(e){t._isInstallable=!0,e.preventDefault(),t._deferredPrompt=e,t._onInstallAvailable()})),window.addEventListener("DOMContentLoaded",(function(){navigator.hasOwnProperty("standalone")&&(t._displayMode=i.STANDALONEIOS),window.matchMedia("(display-mode: standalone)").matches&&(t._displayMode=i.STANDALONE),t._displayModeIsSet=!0,t._onDisplayModeSet()}))}return Object(l.a)(e,[{key:"addDisplayModeSetListener",value:function(e){this._displayModeCallbacks.push(e),this._displayModeIsSet?e(this._displayMode):this._displayModeCallbacks.push(e)}},{key:"_onDisplayModeSet",value:function(){var e,t=Object(a.a)(this._displayModeCallbacks);try{for(t.s();!(e=t.n()).done;){(0,e.value)(this._displayMode)}}catch(s){t.e(s)}finally{t.f()}}},{key:"addInstallAvailableListener",value:function(e){this._isInstallable?e():this._installAvailableCallbacks.push(e)}},{key:"_onInstallAvailable",value:function(){var e,t=Object(a.a)(this._installAvailableCallbacks);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(s){t.e(s)}finally{t.f()}}},{key:"promptToInstall",value:function(e){var t=this;if(!this._isInstallable)throw new Error("App is not currently installable.");this._installCallbacks.push(e),this._deferredPrompt.prompt(),this._deferredPrompt.userChoice.then((function(e){"accepted"===e.outcome?(t._installResult=n.ACCEPTED,t._onInstall()):t._installResult=n.REJECTED}))}},{key:"addInstallListener",value:function(e){this._installResult===n.ACCEPTED?e():this._installCallbacks.push(e)}},{key:"_onInstall",value:function(){var e,t=Object(a.a)(this._installCallbacks);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(s){t.e(s)}finally{t.f()}}}]),e}()},,function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(1),i=s(2),a=function(){function e(t,s){Object(n.a)(this,e),this._drinks=[],this._sessionMax=void 0,this._date=new Date,this._targetHourlyRate=void 0,this._sessionMax=t,this._targetHourlyRate=s}return Object(i.a)(e,[{key:"addDrink",value:function(e){this._drinks.push(e)}},{key:"deleteLast",value:function(){this._drinks.splice(this._drinks.length-1,1)}},{key:"drinks",get:function(){return this._drinks}},{key:"lastDrink",get:function(){return this._drinks.length>0?this._drinks[this._drinks.length-1]:null}},{key:"date",get:function(){return this._date},set:function(e){this._date=e}},{key:"unitsConsumed",get:function(){return this._drinks.reduce((function(e,t){return e+t.alcoholUnits}),0)}},{key:"sessionMax",get:function(){return this._sessionMax}},{key:"sessionRemaining",get:function(){var e=this._sessionMax-this.unitsConsumed;return e<0?0:e}},{key:"hourlyRate",get:function(){if(0===this._drinks.length)return 0;var e=this._drinks[0].time,t=((new Date).valueOf()-e.valueOf())/1e3/60/60+1;return this.unitsConsumed/t}},{key:"targetHourlyRate",get:function(){return this._targetHourlyRate}},{key:"nextDrinkTime",get:function(){return this.lastDrink?new Date(this.lastDrink.time.valueOf()+this.lastDrink.alcoholUnits/this._targetHourlyRate*60*60*1e3):null}}]),e}()},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(1),i=s(2),a=function(){function e(t){Object(n.a)(this,e),this._sessions=void 0,this._sessions=t||[]}return Object(i.a)(e,[{key:"addSession",value:function(e){this._sessions.push(e)}},{key:"sessions",get:function(){return this._sessions}}]),e}()},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(1),i=s(2),a=function(){function e(t,s,i,a,o){Object(n.a)(this,e),this._unitsConsumed=void 0,this._sessionMax=void 0,this._weeklyMax=void 0,this._rollingWeekly=void 0,this._date=void 0,this._unitsConsumed=t,this._sessionMax=i,this._weeklyMax=a,this._rollingWeekly=o,this._date=s}return Object(i.a)(e,[{key:"date",get:function(){return this._date}},{key:"unitsConsumed",get:function(){return this._unitsConsumed}},{key:"sessionMax",get:function(){return this._sessionMax}},{key:"weeklyMax",get:function(){return this._weeklyMax}},{key:"rollingWeekly",get:function(){return this._rollingWeekly}},{key:"isSessionOk",get:function(){return this._unitsConsumed<=this._sessionMax}},{key:"isWeeklyOk",get:function(){return this._rollingWeekly<=this._weeklyMax}}]),e}()},function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(1),i=s(2),a=s(7),o=function(){function e(t,s,i,a){Object(n.a)(this,e),this._volume=void 0,this._volumeUnit=void 0,this._abv=void 0,this._time=void 0,this._volume=t,this._volumeUnit=s,this._abv=i,this._time=a||new Date}return Object(i.a)(e,[{key:"volume",get:function(){return this._volume}},{key:"volumeUnit",get:function(){return this._volumeUnit}},{key:"abv",get:function(){return this._abv}},{key:"time",get:function(){return this._time}},{key:"alcoholUnits",get:function(){var e=this._volumeUnit===a.a.Ounces?29.574*this._volume:this._volume;return this._abv*e/1e3}}]),e}()},function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(1),i=s(2),a=s(4),o=s(3),l=s(0),r=(s(40),function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"_showHideClassName",value:function(){return this.props.show?"modal-true-false modal-true-false-display-block":"modal-true-false modal-true-false-display-none"}},{key:"render",value:function(){var e=this;return l.createElement("div",{className:this._showHideClassName()},l.createElement("div",{className:"modal-true-false-main"},l.createElement("div",{className:"modal-true-false-title"},this.props.title),l.createElement("div",{className:"modal-true-false-content"},this.props.children),l.createElement("div",{className:"modal-true-false-buttons"},l.createElement("button",{className:"modal-true-false-buttons-reject",onClick:function(){return e.props.handleClose(!1)}},this.props.rejectText),l.createElement("span",{className:"modal-true-false-buttons-spacer"}),l.createElement("button",{className:"modal-true-false-buttons-accept",onClick:function(){return e.props.handleClose(!0)}},this.props.acceptText))))}}]),s}(l.Component))},,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return MainPanel}));var C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6),C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2),C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4),C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__),_main_panel_scss__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(34),_main_panel_scss__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_main_panel_scss__WEBPACK_IMPORTED_MODULE_7__),_tabs_tabs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(20),_tabs_tab__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8),_settings_panel_settings_panel__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(21),_history_panel_history_panel__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(26),_session_panel_active_session_panel_active_session_panel__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(27),_model_active_session__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(11),_model_unit__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(7),_model_history__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(12),_session_panel_no_session_panel_no_session_panel__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(22),_model_historical_session__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(13),_modal_true_false_selection_modal_true_false_selection__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(15),_about_panel_about_panel__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(23),_disclaimer_disclaimer__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(24),_how_to_panel_how_to_panel__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(25),_services_install_service__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(9),MINUTE=6e4,TIMEOUT_CHECK_INTERVAL=2*MINUTE,TIMEOUT_AFTER=120*MINUTE,MainPanel=function(_React$Component){Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(MainPanel,_React$Component);var _super=Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__.a)(MainPanel);function MainPanel(e){var t,s,n;Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,MainPanel),(n=_super.call(this,e))._settingsService=void 0,n._sessionService=void 0,n._historyService=void 0,n._mainStateService=void 0,n._installService=void 0,n._activeSession=void 0,n._history=void 0,n._lastTimeoutCheckTime=void 0,n._settingsService=e.settingsService,n._sessionService=e.sessionService,n._historyService=e.historyService,n._mainStateService=e.mainStateService,n._installService=e.installService,n._activeSession=n._loadSession(),n._history=n._loadHistory(),n._lastTimeoutCheckTime=(null===(t=n._activeSession)||void 0===t||null===(s=t.lastDrink)||void 0===s?void 0:s.time)||new Date,n._setCheckForTimeout();var i=n._mainStateService.viewedHowToTab;return n.state={activeTabLabel:i?"Session":"How-To",sessionState:n._activeSession?n._getUpdatedSessionState():null,history:n._history,showCancelSessionWarning:!1,showDeleteHistoryWarning:!1,settingsState:n._getSettingsStateFromService(),showDisclaimer:!n._mainStateService.acceptedDisclaimer,showTimeoutPrompt:n._passedTimeout(),showInstallButton:!1,displayMode:_services_install_service__WEBPACK_IMPORTED_MODULE_22__.a.BROWSERTAB,installable:!1},n}return Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(MainPanel,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;console.log("Component Did Mount."),this._installService.addDisplayModeSetListener((function(e){console.log("Display Mode set:",e),_this2.setState((function(t){return{showInstallButton:e===_services_install_service__WEBPACK_IMPORTED_MODULE_22__.a.BROWSERTAB&&t.installable,displayMode:e}}))})),this._installService.addInstallAvailableListener((function(){console.log("Install Available"),_this2.setState((function(e){return{showInstallButton:e.displayMode===_services_install_service__WEBPACK_IMPORTED_MODULE_22__.a.BROWSERTAB,installable:!0}}))})),eval("window.mainPanel = this")}},{key:"_promptForInstall",value:function(){var e=this;this._installService.promptToInstall((function(){e.setState({showInstallButton:!1})}))}},{key:"_checkTimeForTimeout",value:function(){this._passedTimeout()&&this.setState({showTimeoutPrompt:!0,activeTabLabel:"Session"})}},{key:"_setCheckForTimeout",value:function(){setInterval(this._checkTimeForTimeout.bind(this),TIMEOUT_CHECK_INTERVAL)}},{key:"_passedTimeout",value:function(){return!!this._activeSession&&(new Date).valueOf()-this._lastTimeoutCheckTime.valueOf()>=TIMEOUT_AFTER}},{key:"_acceptDisclaimer",value:function(){this._mainStateService.acceptedDisclaimer=!0,this.setState({showDisclaimer:!1})}},{key:"_loadHistory",value:function(){var e=this._historyService.loadHistory();return e||(e=new _model_history__WEBPACK_IMPORTED_MODULE_15__.a),e}},{key:"_loadSession",value:function(){return this._sessionService.loadSession()}},{key:"_refreshHistory",value:function(){this._historyService.saveHistory(this._history),this._history=this._loadHistory(),this.setState({history:this._getUpdatedHistorySate()})}},{key:"_refreshSettings",value:function(){var e=this._getSettingsStateFromService();this.setState({settingsState:e})}},{key:"_addDrink",value:function(e){if(!this._activeSession)throw new Error("No Active Session.");this._activeSession.addDrink(e),this._sessionService.saveSession(this._activeSession),this.setState({sessionState:this._getUpdatedSessionState()})}},{key:"_changeTab",value:function(e){this.setState({activeTabLabel:e})}},{key:"_getRollingWeeklyRemaining",value:function(){var e=this._settingsService.weeklyMax-this._getRollingWeeklyTotal();return e<0?0:e}},{key:"_getUpdatedSessionState",value:function(){if(!this._activeSession)throw new Error("No Active Session.");return{lastDrink:this._activeSession.lastDrink,nextDrinkTime:this._activeSession.nextDrinkTime,sessionTotal:this._activeSession.unitsConsumed,sessionRemaining:this._activeSession.sessionRemaining,sessionMax:this._settingsService.sessionMax,hourlyRate:this._activeSession.hourlyRate,hourlyRateMax:this._settingsService.consumptionRate,rollingWeeklyTotal:this._getRollingWeeklyTotal(),rollingWeeklyRemaining:this._getRollingWeeklyRemaining(),rollingWeeklyMax:this._settingsService.weeklyMax,lastVolume:this._activeSession.lastDrink?this._activeSession.lastDrink.volume:12,lastAbv:this._activeSession.lastDrink?this._activeSession.lastDrink.abv:5,lastVolumeUnit:this._activeSession.lastDrink?this._activeSession.lastDrink.volumeUnit:_model_unit__WEBPACK_IMPORTED_MODULE_14__.a.Ounces}}},{key:"_getUpdatedHistorySate",value:function(){return{sessions:this._history.sessions.map((function(e){return{unitsConsumed:e.unitsConsumed,sessionMax:e.sessionMax,weeklyMax:e.weeklyMax,rollingWeekly:e.rollingWeekly,date:e.date}}))}}},{key:"_beginNewSession",value:function(){this._activeSession=new _model_active_session__WEBPACK_IMPORTED_MODULE_13__.a(this._settingsService.sessionMax,this._settingsService.consumptionRate),this._sessionService.saveSession(this._activeSession),this._lastTimeoutCheckTime=new Date,this.setState({activeTabLabel:"Session",sessionState:this._getUpdatedSessionState()})}},{key:"_getRollingWeeklyTotal",value:function(){for(var e=0,t=new Date(this._activeSession.date.getTime()-6048e5),s=this._history.sessions.length-1;s>=0;){var n=this._history.sessions[s];if(n.date<t)break;e+=n.unitsConsumed,s--}return e+this._activeSession.unitsConsumed}},{key:"_finishSession",value:function(){if(!this._activeSession)throw new Error("No Active Session.");var e=new _model_historical_session__WEBPACK_IMPORTED_MODULE_17__.a(this._activeSession.unitsConsumed,this._activeSession.date,this._activeSession.sessionMax,this._settingsService.weeklyMax,this._getRollingWeeklyTotal());this._history.addSession(e),this._refreshHistory(),this._activeSession=null,this._sessionService.deleteSession(),this.setState({activeTabLabel:"Session",sessionState:null,showTimeoutPrompt:!1})}},{key:"_warnCancelSession",value:function(){this.setState({showCancelSessionWarning:!0})}},{key:"_finishCancelSession",value:function(e){e?(this._activeSession=new _model_active_session__WEBPACK_IMPORTED_MODULE_13__.a(this._settingsService.sessionMax,this._settingsService.consumptionRate),this._sessionService.deleteSession(),this.setState({activeTabLabel:"Session",sessionState:null,showCancelSessionWarning:!1})):this.setState({showCancelSessionWarning:!1})}},{key:"_warnDeleteHistory",value:function(){this.setState({showDeleteHistoryWarning:!0})}},{key:"_finishDeleteHistory",value:function(e){e?(this._historyService.deleteHistory(),this._history=new _model_history__WEBPACK_IMPORTED_MODULE_15__.a,this.setState({history:this._history,showDeleteHistoryWarning:!1})):this.setState({showDeleteHistoryWarning:!1})}},{key:"_areSettingsValid",value:function(e){return!!(this._hasValue(e.weeklyMax)&&this._hasValue(e.sessionMax)&&this._hasValue(e.units)&&this._hasValue(e.hours)&&this._hasValue(e.historySessionsToKeep))}},{key:"_hasValue",value:function(e){return null!==e&&e.trim().length>0}},{key:"_validateStateSettings",value:function(e){this._areSettingsValid(e)?e.areInputsValid=!0:e.areInputsValid=!1}},{key:"_handleChangeSettingSessionMax",value:function(e){var t=Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},this.state.settingsState),{},{sessionMax:e});e!==this.state.settingsState.sessionMax&&(t.changesExist=!0),this._validateStateSettings(t),this.setState({settingsState:t})}},{key:"_handleChangeSettingWeeklyMax",value:function(e){var t=Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},this.state.settingsState),{},{weeklyMax:e});e!==this.state.settingsState.weeklyMax&&(t.changesExist=!0),this._validateStateSettings(t),this.setState({settingsState:t})}},{key:"_handleChangeSettingUnits",value:function(e){var t=Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},this.state.settingsState),{},{units:e});e!==this.state.settingsState.units&&(t.changesExist=!0),this._validateStateSettings(t),this.setState({settingsState:t})}},{key:"_handleChangeSettingHours",value:function(e){var t=Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},this.state.settingsState),{},{hours:e});e!==this.state.settingsState.hours&&(t.changesExist=!0),this._validateStateSettings(t),this.setState({settingsState:t})}},{key:"_handleChangeSettingHistorySessions",value:function(e){var t=Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},this.state.settingsState),{},{historySessionsToKeep:e});e!==this.state.settingsState.historySessionsToKeep&&(t.changesExist=!0),this._validateStateSettings(t),this.setState({settingsState:t})}},{key:"_handleCancelSettingsChanges",value:function(){this._refreshSettings()}},{key:"_handleRestoreDefaultSettings",value:function(){this.props.settingsService.restoreDefaults(),this._historyService.sessionsToKeep=this.props.settingsService.historySessionsToKeep;var e=this._getSettingsStateFromService();this.setState({settingsState:e})}},{key:"_getSettingsStateFromService",value:function(){return{weeklyMax:this._settingsService.weeklyMax.toString(),sessionMax:this._settingsService.sessionMax.toString(),units:this._settingsService.alcoholUnits.toString(),hours:this._settingsService.hours.toString(),historySessionsToKeep:this._settingsService.historySessionsToKeep.toString(),areInputsValid:!0,changesExist:!1}}},{key:"_handleSaveSettings",value:function(){var e=parseInt(this.state.settingsState.historySessionsToKeep);this._settingsService.updateSettings({weeklyMax:parseFloat(this.state.settingsState.weeklyMax),sessionMax:parseFloat(this.state.settingsState.sessionMax),alcoholUnits:parseFloat(this.state.settingsState.units),hours:parseFloat(this.state.settingsState.hours),historySessionsToKeep:e}),this._historyService.sessionsToKeep=e,this._refreshHistory(),this._refreshSettings()}},{key:"_importHistory",value:function(e){var t,s=Object(C_workspace_less_tipsy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__.a)(e);try{for(s.s();!(t=s.n()).done;){var n=t.value;this._history.addSession(new _model_historical_session__WEBPACK_IMPORTED_MODULE_17__.a(n.unitsConsumed,n.date,n.sessionMax,n.weeklyMax,n.rollingWeekly))}}catch(i){s.e(i)}finally{s.f()}this._history.sessions.sort((function(e,t){return e.date<t.date?-1:e.date===t.date?0:1})),this._refreshHistory()}},{key:"_handleDeleteLastDrink",value:function(){this._activeSession.deleteLast(),this._sessionService.saveSession(this._activeSession);var e=this._getUpdatedSessionState();this.setState({sessionState:e})}},{key:"_handleSessionTimeout",value:function(e){e?this._finishSession():(this._lastTimeoutCheckTime=new Date,this.setState({showTimeoutPrompt:!1}))}},{key:"render",value:function(){var e=this;return react__WEBPACK_IMPORTED_MODULE_6__.createElement(react__WEBPACK_IMPORTED_MODULE_6__.Fragment,null,this.state.showDisclaimer?react__WEBPACK_IMPORTED_MODULE_6__.createElement(_disclaimer_disclaimer__WEBPACK_IMPORTED_MODULE_20__.a,{accept:this._acceptDisclaimer.bind(this)}):react__WEBPACK_IMPORTED_MODULE_6__.createElement("div",null,this.state.showInstallButton?react__WEBPACK_IMPORTED_MODULE_6__.createElement("div",{className:"add-button",onClick:this._promptForInstall.bind(this)},react__WEBPACK_IMPORTED_MODULE_6__.createElement("img",{id:"add-icon",alt:"Add to Home Screen",src:"./beer192.png"}),react__WEBPACK_IMPORTED_MODULE_6__.createElement("label",{htmlFor:"add-icon"},"Add to Home Screen")):react__WEBPACK_IMPORTED_MODULE_6__.createElement("div",null,"DEBUG: Installable? ",this.state.installable?"isntallable":"not installable","; DisplayMode: ",this.state.displayMode),react__WEBPACK_IMPORTED_MODULE_6__.createElement(_tabs_tabs__WEBPACK_IMPORTED_MODULE_8__.a,{activeTabLabel:this.state.activeTabLabel,activeTabChanged:this._changeTab.bind(this)},this.state.sessionState?react__WEBPACK_IMPORTED_MODULE_6__.createElement(_tabs_tab__WEBPACK_IMPORTED_MODULE_9__.a,{label:"Session"},react__WEBPACK_IMPORTED_MODULE_6__.createElement(_session_panel_active_session_panel_active_session_panel__WEBPACK_IMPORTED_MODULE_12__.a,{addDrink:this._addDrink.bind(this),finishSession:this._finishSession.bind(this),cancelSession:this._warnCancelSession.bind(this),lastDrink:this.state.sessionState.lastDrink,nextDrinkTime:this.state.sessionState.nextDrinkTime,sessionTotal:this.state.sessionState.sessionTotal,sessionRemaining:this.state.sessionState.sessionRemaining,sessionMax:this.state.sessionState.sessionMax,hourlyRate:this.state.sessionState.hourlyRate,hourlyRateMax:this.state.sessionState.hourlyRateMax,rollingWeeklyTotal:this.state.sessionState.rollingWeeklyTotal,rollingWeeklyRemaining:this.state.sessionState.rollingWeeklyRemaining,rollingWeeklyMax:this.state.sessionState.rollingWeeklyMax,lastVolume:this.state.sessionState.lastVolume,lastAbv:this.state.sessionState.lastAbv,lastVolumeUnit:this.state.sessionState.lastVolumeUnit,deleteLastDrink:this._handleDeleteLastDrink.bind(this)}),react__WEBPACK_IMPORTED_MODULE_6__.createElement(_modal_true_false_selection_modal_true_false_selection__WEBPACK_IMPORTED_MODULE_18__.a,{title:"Cancel Session?",show:this.state.showCancelSessionWarning,acceptText:"Cancel Session",rejectText:"Keep Current Session",handleClose:this._finishCancelSession.bind(this)},"Are you sure you want to cancel the current session?  This cannot be undone!"),react__WEBPACK_IMPORTED_MODULE_6__.createElement(_modal_true_false_selection_modal_true_false_selection__WEBPACK_IMPORTED_MODULE_18__.a,{title:"Finish Session?",show:this.state.showTimeoutPrompt,acceptText:"Finish Session",rejectText:"Keep Current Session",handleClose:this._handleSessionTimeout.bind(this)},"It has been more than 2 hours since your last drink.  Would you like to finish the current session?")):react__WEBPACK_IMPORTED_MODULE_6__.createElement(_tabs_tab__WEBPACK_IMPORTED_MODULE_9__.a,{label:"Session"},react__WEBPACK_IMPORTED_MODULE_6__.createElement(_session_panel_no_session_panel_no_session_panel__WEBPACK_IMPORTED_MODULE_16__.a,{onBeginNewSession:this._beginNewSession.bind(this)})),react__WEBPACK_IMPORTED_MODULE_6__.createElement(_tabs_tab__WEBPACK_IMPORTED_MODULE_9__.a,{label:"Settings"},react__WEBPACK_IMPORTED_MODULE_6__.createElement(_settings_panel_settings_panel__WEBPACK_IMPORTED_MODULE_10__.a,{sessionMax:this.state.settingsState.sessionMax,weeklyMax:this.state.settingsState.weeklyMax,units:this.state.settingsState.units,hours:this.state.settingsState.hours,historySessionsToKeep:this.state.settingsState.historySessionsToKeep,changesExist:this.state.settingsState.changesExist,areInputsValid:this.state.settingsState.areInputsValid,onChangeSessionMax:this._handleChangeSettingSessionMax.bind(this),onChangeWeeklyMax:this._handleChangeSettingWeeklyMax.bind(this),onChangeUnits:this._handleChangeSettingUnits.bind(this),onChangeHours:this._handleChangeSettingHours.bind(this),onChangeHistorySessions:this._handleChangeSettingHistorySessions.bind(this),onCancelChanges:this._handleCancelSettingsChanges.bind(this),onRestoreDefaults:this._handleRestoreDefaultSettings.bind(this),onSaveSettings:this._handleSaveSettings.bind(this)})),react__WEBPACK_IMPORTED_MODULE_6__.createElement(_tabs_tab__WEBPACK_IMPORTED_MODULE_9__.a,{label:"History"},react__WEBPACK_IMPORTED_MODULE_6__.createElement(_history_panel_history_panel__WEBPACK_IMPORTED_MODULE_11__.a,{sessions:this.state.history.sessions,deleteHistory:this._warnDeleteHistory.bind(this),importHistory:this._importHistory.bind(this)}),react__WEBPACK_IMPORTED_MODULE_6__.createElement(_modal_true_false_selection_modal_true_false_selection__WEBPACK_IMPORTED_MODULE_18__.a,{title:"Delete Session?",show:this.state.showDeleteHistoryWarning,acceptText:"Delete History",rejectText:"Keep History",handleClose:this._finishDeleteHistory.bind(this)},"Are you sure you want to delete the ",react__WEBPACK_IMPORTED_MODULE_6__.createElement("b",null,"entire")," history?  This cannot be undone!")),react__WEBPACK_IMPORTED_MODULE_6__.createElement(_tabs_tab__WEBPACK_IMPORTED_MODULE_9__.a,{label:"How-To"},react__WEBPACK_IMPORTED_MODULE_6__.createElement(_how_to_panel_how_to_panel__WEBPACK_IMPORTED_MODULE_21__.a,{viewedHowToPanel:function(){return e._mainStateService.viewedHowToTab=!0}})),react__WEBPACK_IMPORTED_MODULE_6__.createElement(_tabs_tab__WEBPACK_IMPORTED_MODULE_9__.a,{label:"About"},react__WEBPACK_IMPORTED_MODULE_6__.createElement(_about_panel_about_panel__WEBPACK_IMPORTED_MODULE_19__.a,null)))))}}]),MainPanel}(react__WEBPACK_IMPORTED_MODULE_6__.Component)},function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(1),i=s(2),a=s(4),o=s(3),l=s(0),r=function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"_setActiveTab",value:function(e){this.props.activeTabChanged&&this.props.activeTabChanged(e.props.label,e)}},{key:"render",value:function(){var e,t=this,s=this.props.activeTabLabel&&null!==(e=this.props.children.find((function(e){return e.props.label===t.props.activeTabLabel})))&&void 0!==e?e:this.props.children[0];return l.createElement("div",{className:"tab-container"},l.createElement("div",{className:"tab-headers"},this.props.children.map((function(e){return l.createElement("div",{key:"tab-header-"+e.props.label,className:"tab-header "+(e===s?"active-tab-header":""),onClick:function(){return t._setActiveTab(e)}},e.props.label)}))),s)}}]),s}(l.Component)},function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(1),i=s(2),a=s(4),o=s(3),l=s(0),r=(s(35),function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return l.createElement("div",{className:"settings-container"},l.createElement("h3",null,"Settings"),l.createElement("div",{className:"settings-input max-per-session"},l.createElement("div",{className:"settings-label"},"Max Alcohol Units Per Session"),l.createElement("input",{type:"number",value:this.props.sessionMax,size:5,maxLength:5,min:.1,max:12,step:1,name:"maxPerSessionInput",onChange:function(t){return e.props.onChangeSessionMax(t.target.value)}})),l.createElement("div",{className:"settings-input max-per-week"},l.createElement("div",{className:"settings-label"},"Max Alcohol Units Per Week"),l.createElement("input",{type:"number",value:this.props.weeklyMax,size:5,maxLength:5,min:.1,max:49,step:1,name:"maxPerWeekInput",onChange:function(t){return e.props.onChangeWeeklyMax(t.target.value)}})),l.createElement("strong",null,"Consumption Rate"),l.createElement("div",{className:"settings-input session-rate-units"},l.createElement("div",{className:"settings-label"},"Units..."),l.createElement("input",{type:"number",value:this.props.units,size:5,maxLength:5,min:.1,max:12,step:1,name:"units",onChange:function(t){return e.props.onChangeUnits(t.target.value)}})),l.createElement("div",{className:"settings-input session-rate-hour"},l.createElement("div",{className:"settings-label"},"...Per Hours"),l.createElement("input",{type:"number",value:this.props.hours,size:5,maxLength:5,min:.1,max:12,step:1,name:"hours",onChange:function(t){return e.props.onChangeHours(t.target.value)}})),l.createElement("strong",null,"History"),l.createElement("div",{className:"settings-input keep-history-sessions"},l.createElement("div",{className:"settings-label"},"History Sessions to Keep"),l.createElement("input",{type:"number",value:this.props.historySessionsToKeep,size:3,maxLength:3,min:0,step:1,max:366,name:"historySessions",onChange:function(t){return e.props.onChangeHistorySessions(t.target.value)}})),l.createElement("div",{className:"settings-buttons"},l.createElement("button",{className:"btn",onClick:this.props.onSaveSettings,disabled:!this.props.changesExist||!this.props.areInputsValid},"Save"),l.createElement("button",{className:"btn",onClick:this.props.onCancelChanges,disabled:!this.props.changesExist},"Cancel Changes"),l.createElement("button",{className:"btn btn-danger",onClick:this.props.onRestoreDefaults},"Restore Defaults")))}}]),s}(l.Component))},function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(1),i=s(2),a=s(4),o=s(3),l=s(0),r=function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return l.createElement("div",null,l.createElement("h3",null,"No Active Sessions"),l.createElement("div",null,l.createElement("button",{className:"btn",onClick:this.props.onBeginNewSession},"Begin New Session")))}}]),s}(l.Component)},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(0),i=s.n(n),a=function(){return i.a.createElement("div",null,i.a.createElement("h3",null,"About"),i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement("strong",null,"Alcohol Units")),i.a.createElement("p",null,"This application uses Acohol Units to track alcohol consumption.  An alcohol unit is defined as 10ml or 8g of pure alcohol; this definition is provided by the ",i.a.createElement("span",null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.nhs.uk/live-well/alcohol-support/calculating-alcohol-units/",title:"Alcohol Units - NHS"},"National Health Service (UK)")),"."),i.a.createElement("p",null,"As such, the defaults for alcohol consumption in this app are set to amount recommended by the NHS: a maximum of 14 units per week.  You may changes these settings, but you do so at your own risk."),i.a.createElement("p",null,'Also note that an alcohol unit is roughly (but not precisely!) equivalent to 1/2 of a U.S. "standard" drink.'),i.a.createElement("p",null,i.a.createElement("strong",null,"Data Persistence")),i.a.createElement("p",null,"All settings, current session data, and session history are stored only in the local browser storage. This means the data will only be available in the current browser and device. If you wish to move the data to another browser or device, you will need to export it (.csv format) from the History tab and import in the History tab of the target browser/device."),i.a.createElement("p",null,"While this isn't as convenient as cloud storage, it allows you to own the data, and prevents selling, theft, or misuse of the data.")),i.a.createElement("p",null,i.a.createElement("strong",null,"Credits")),i.a.createElement("p",null,"Icon made by ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.flaticon.com/authors/good-ware",title:"Good Ware"},"Good Ware")," from ",i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.flaticon.com/",title:"Flaticon"}," www.flaticon.com")))}},function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(1),i=s(2),a=s(4),o=s(3),l=s(0),r=(s(41),function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(e){var i;return Object(n.a)(this,s),(i=t.call(this,e)).state={accepted:!1},i}return Object(i.a)(s,[{key:"_setAccepted",value:function(e){this.setState({accepted:e})}},{key:"_submit",value:function(){this.state.accepted&&(window.scroll({top:0,left:0,behavior:"smooth"}),this.props.accept())}},{key:"render",value:function(){var e=this;return l.createElement("div",{className:"disclaimer-blackout"},l.createElement("div",{className:"disclaimer-main"},l.createElement("h3",null,"Terms and Conditions"),l.createElement("div",{className:"disclaimer-content"},l.createElement("p",null,l.createElement("strong",null,"General")),l.createElement("p",null,"You the user of this application agree to accept sole responsibility for the usage of this application and any consequences resulting from the usage of this app.  You agree to absolve the author of any consequences resulting from this app or its usage."),l.createElement("p",null,l.createElement("strong",null,"Health Disclaimer")),l.createElement("p",null,"You must be at least the minimum age to consume alcohol in your jurisdiction. To use this app, you agree to first consult with your doctor about the effects of reducing or eliminating alcohol consumption; some individuals may have serious life threatening side effects associated with sudden alcohol withdrawal."),l.createElement("p",null,"This app exists purely to help with tracking alcohol consumption.  By using this app, you agree not to consume more than the recommended about of alcohol as defined by your jurisdictions health services or your doctor, whichever is less. If no such health service exists in your jurisdiction and/or no doctor is available to you, you agree not to use this app."),l.createElement("p",null,"You agree not to increase your current alcohol consumption while using this app."),l.createElement("p",null,"If you have any existing health issues that might be exacerbated by drinking alcohol, or potential health issues that might result from drinking, or reducing alcohol consumption, you agree not to use this app."),l.createElement("p",null,l.createElement("strong",null,"Data Disclaimer")),l.createElement("p",null,"This application collects data in local browser storage.  It is not transmitted or made available to anyone through the application or site. You own the data and may delete or transmit it at your own discretion."),l.createElement("p",null,"It may be possible for other websites to track your usage of this site; you agree to indemnify the author for any such occurances."),l.createElement("p",null,l.createElement("strong",null,"Software Disclaimer")),l.createElement("p",null,'This application is provided "as is" and "as available", with no warranty, and no gaurantee of fitness for a particular purpose.'),l.createElement("p",null,"This is free and open source software, issued under the MIT license (source code and license available at ",l.createElement("a",{href:"https://github.com/shaunlusk/less-tipsy"},"https://github.com/shaunlusk/less-tipsy"),")."),l.createElement("p",null,l.createElement("strong",null,"Jurisdiction Disclaimer")),l.createElement("p",null,"If any of these terms is not enforceable or is prohibited by law, or cannot otherwise be applied, you agree not to use this application."),l.createElement("p",null,l.createElement("strong",null,"Miscellaneous")),l.createElement("p",null,"These terms are subject to change without notice."),l.createElement("p",null,"By using this app, you accept these terms in their entirety."),l.createElement("p",null,"Please drink responsibly."),l.createElement("p",null,l.createElement("input",{type:"checkbox",id:"accept-check",onChange:function(t){return e._setAccepted(t.target.checked)},checked:this.state.accepted}),l.createElement("label",{htmlFor:"accept-check"},"I Agree to the terms.")),l.createElement("div",{className:"disclaimer-buttons"},l.createElement("button",{className:"btn btn-accept disclaimer-buttons-accept",onClick:function(){return e._submit()}},"I Accept")))))}}]),s}(l.Component))},function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(0),i=s.n(n),a=function(e){return(0,e.viewedHowToPanel)(),i.a.createElement("div",null,i.a.createElement("h3",null,"How-To"),i.a.createElement("p",null,"This application tracks alcohol consumption.  Consumption is tracked using alcohol units.  See the 'About' tab for more information on this calculation."),i.a.createElement("p",null,i.a.createElement("strong",null,"Basic Usage")),i.a.createElement("p",null,"To begin a new session, click the 'Session' tab, and click the 'Begin New Session' button."),i.a.createElement("p",null,"From there, every time you start a new drink, fill in the drink volume and ABV percentage, and click 'Add'. This will add the drink to your current session."),i.a.createElement("p",null,"To remove the last drink, click the 'x' button, next to the last drink entry."),i.a.createElement("p",null,"To Finish or Cancel the current session, click the appropriate button at the bottom of the session panel."),i.a.createElement("p",null,"Your drinks will be tracked, and the session summary shown in the lower of the Session tab. All calculations of rates and alcohol units remaining are based on your Settings."),i.a.createElement("ul",null,i.a.createElement("li",null,"The Last Drink section shows the detail about the last drink consumed."),i.a.createElement("li",null,"The Next Drink section shows the time for your next drink, based on your configured consumption rate."),i.a.createElement("li",null,"Session Total shows the total alcohol units you have consumed this session."),i.a.createElement("li",null,"Session Remaining shows how many alcohol units you are allowed for the remainder of this session."),i.a.createElement("li",null,"Rolling Hourly rate shows how many alcohol units you have consumed per hour on average for the current session."),i.a.createElement("li",null,"Rolling Weekly Total shows the total alcohol units you have consumed over the past 7 days, including the current session."),i.a.createElement("li",null,"Rolling Weekly Remaining shows how many alcohol units your are allowed for the current week.")),i.a.createElement("p",null,"Any totals or limits that are exceeded will be shown in red; as well the 'Add' button will turn red."),i.a.createElement("h3",null,"Settings"),i.a.createElement("p",null,"The settings tab lets you configure:"),i.a.createElement("ul",null,i.a.createElement("li",null,"The maximum allowed alcohol units per session."),i.a.createElement("li",null,"The maximum allowed alcohol units per week."),i.a.createElement("li",null,"The recommended consumption rate in units per hours."),i.a.createElement("li",null,"The number of sessions to be stored in the history tab.")),i.a.createElement("h3",null,"History"),i.a.createElement("p",null,"The history tab tracks your sessions by date. This information is only stored locally in the browser; it is not transmitted elsewhere (see About tab)."),i.a.createElement("p",null,"If you wish to move your history to another device you will need to export it from the current device, then import the file on the target device."))}},function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(1),i=s(2),a=s(4),o=s(3),l=s(0),r=s.n(l),_=function(e){var t=e.datetime,s=e.format.toLocaleUpperCase();s=(s=s.replace("YYYY",t.getFullYear().toString())).replace("YY",t.getFullYear().toString().substring(2,4));var n=t.getMonth()+1;s=s.replace("MM",n<10?"0"+n:n.toString());var i=t.getDate();return s=s.replace("DD",i<10?"0"+i:i.toString()),r.a.createElement("span",null,s)},c=s(5);var u="Date,Units,Session Max,Rolling Weekly,Weekly Max",h=function(){function e(){Object(n.a)(this,e)}return Object(i.a)(e,null,[{key:"exportHistory",value:function(e){!function(e,t,s){var n=new Blob([e],{type:s}),i=document.createElement("a"),a=URL.createObjectURL(n);i.href=a,i.download=t,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(a)}),0)}(this.historyToData(e),"less-tipsy-history.csv","text/csv")}},{key:"historyToData",value:function(e){return"".concat("v1.0","\n").concat(u,"\n")+e.map((function(e){return"".concat(e.date,",").concat(e.unitsConsumed,",").concat(e.sessionMax,",").concat(e.rollingWeekly,",").concat(e.weeklyMax)})).join("\n")}},{key:"dataToHistory",value:function(e){var t=e.trim().split("\n");if(t.length<2||"v1.0"!==t[0]||t[1]!==u)throw new Error("Invalid csv format.");return t.splice(0,2),t.map((function(e){var t=e.trim().split(",");if(0===t.length)throw new Error("Import csv was not valid.");var s=parseFloat(t[1]),n=parseFloat(t[2]),i=parseFloat(t[3]),a=parseFloat(t[4]);if(isNaN(s)||isNaN(n)||isNaN(i)||isNaN(a))throw new Error("Import csv was not valid.");return{date:new Date(t[0]),unitsConsumed:s,sessionMax:n,rollingWeekly:i,weeklyMax:a}}))}},{key:"importHistory",value:function(e){var t=this;return e.text().then((function(e){return t.dataToHistory(e)}))}}]),e}(),m=(s(36),s(37),function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"_showHideClassName",value:function(){return this.props.show?"modal modal-display-block":"modal modal-display-none"}},{key:"render",value:function(){var e=this;return l.createElement("div",{className:this._showHideClassName()},l.createElement("div",{className:"modal-main"},l.createElement("div",{className:"modal-title"},this.props.title),l.createElement("div",{className:"modal-content"},this.props.children),l.createElement("div",{className:"modal-buttons"},l.createElement("button",{className:"modal-button",onClick:function(){return e.props.handleClose()}},this.props.buttonText))))}}]),s}(l.Component)),d=function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(e){var i;return Object(n.a)(this,s),(i=t.call(this,e)).state={showImportFailedModal:!1,showImportSuccessModal:!1},i}return Object(i.a)(s,[{key:"_importHistory",value:function(e){var t=this;h.importHistory(e).then((function(e){e&&(t._showImportSuccessModal(),t.props.importHistory(e))})).catch((function(e){console.error(e),t._showImportFailedModal()}))}},{key:"_exportHistory",value:function(){h.exportHistory(this.props.sessions.map((function(e){return{date:e.date,sessionMax:e.sessionMax,weeklyMax:e.weeklyMax,rollingWeekly:e.rollingWeekly,unitsConsumed:e.unitsConsumed}})))}},{key:"_showImportFailedModal",value:function(){this.setState({showImportFailedModal:!0})}},{key:"_hideImportFailedModal",value:function(){this.setState({showImportFailedModal:!1})}},{key:"_showImportSuccessModal",value:function(){this.setState({showImportSuccessModal:!0})}},{key:"_hideImportSuccessModal",value:function(){this.setState({showImportSuccessModal:!1})}},{key:"render",value:function(){var e=this,t=0;return l.createElement("div",null,l.createElement("h3",null,"History"),0===this.props.sessions.length?l.createElement("span",null,"No Sessions"):l.createElement("div",{className:"history-panel-sessions"},l.createElement("div",{className:"header col1"},"Date"),l.createElement("div",{className:"header col2"},"Units"),l.createElement("div",{className:"header col3"},"Session Max"),l.createElement("div",{className:"header col4"},"Rolling Weekly"),l.createElement("div",{className:"header col5"},"Weekly Max"),this.props.sessions.map((function(e){return l.createElement(l.Fragment,{key:"session-"+t++},l.createElement("div",{className:"col1"},l.createElement(_,{datetime:e.date,format:"YYYY-MM-DD"})),l.createElement("div",{className:"col2"},l.createElement(c.a,{number:e.unitsConsumed,decimalPlaces:1})),l.createElement("div",{className:"col3"},l.createElement(c.a,{number:e.sessionMax,decimalPlaces:1})),l.createElement("div",{className:"col4"},l.createElement(c.a,{number:e.rollingWeekly,decimalPlaces:1})),l.createElement("div",{className:"col5"},l.createElement(c.a,{number:e.weeklyMax,decimalPlaces:1})))}))),l.createElement("div",{className:"history-panel-buttons"},l.createElement("button",{className:"btn btn-danger delete-history-button",disabled:0===this.props.sessions.length,onClick:this.props.deleteHistory},"Delete History"),l.createElement("div",{className:"history-panel-buttons-import-export"},l.createElement("button",{className:"btn export-button",disabled:0===this.props.sessions.length,onClick:this._exportHistory.bind(this)},"Export History"),l.createElement("label",{className:"btn import-label",htmlFor:"upload-file"},"Import History"),l.createElement("input",{type:"file",name:"file",id:"upload-file",accept:".csv",onChange:function(t){return e._importHistory(t.target.files[0])}}))),l.createElement(m,{title:"Import Error",show:this.state.showImportFailedModal,buttonText:"Ok",handleClose:this._hideImportFailedModal.bind(this)},"Import file format was not valid."),l.createElement(m,{title:"Import Success",show:this.state.showImportSuccessModal,buttonText:"Ok",handleClose:this._hideImportSuccessModal.bind(this)},"History import was successful."))}}]),s}(l.Component)},function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(1),i=s(2),a=s(4),o=s(3),l=s(0),r=s.n(l),_=s(7),c=s(14),u=s(5),h=function(e){var t=e.datetime,s=e.twentyFourHourDisplay,n=t.getHours(),i=s||n<13?n:n-12,a=t.getMinutes(),o=a>9?"".concat(a):"0".concat(a),l=s?"":n>11?"PM":"AM",_="".concat(i,":").concat(o," ").concat(l);return r.a.createElement("span",null,_)},m=(s(38),function(e){var t=e.drink,s=e.deleteDrink;return r.a.createElement("span",null,r.a.createElement(u.a,{number:t.alcoholUnits,decimalPlaces:1})," units (",r.a.createElement(u.a,{number:t.volume,decimalPlaces:1})," ",t.volumeUnit," \xd7 ",r.a.createElement(u.a,{number:t.abv,decimalPlaces:1}),"%) @",r.a.createElement(h,{datetime:t.time}),r.a.createElement("button",{className:"btn-x",onClick:s},"\xd7"))}),d=(s(39),function(e){Object(a.a)(s,e);var t=Object(o.a)(s);function s(e){var i;return Object(n.a)(this,s),(i=t.call(this,e)).state={currentVolume:e.lastVolume.toString(),currentAbv:e.lastAbv.toString(),currentVolumeUnit:e.lastVolumeUnit},i}return Object(i.a)(s,[{key:"_handleChangeVolume",value:function(e){this.setState({currentVolume:e})}},{key:"_handleChangeUnit",value:function(e){var t=e;this.setState({currentVolumeUnit:_.a[t]})}},{key:"_handleChangeAbv",value:function(e){this.setState({currentAbv:e})}},{key:"_addDrink",value:function(){if(this._formIsValid()){var e=parseFloat(this.state.currentVolume),t=parseFloat(this.state.currentAbv),s=new c.a(e,this.state.currentVolumeUnit,t);this.props.addDrink(s)}}},{key:"_formIsValid",value:function(){return this._isvolumeValid()&&this._isAbvValid()}},{key:"_isvolumeValid",value:function(){return null!==this.state.currentVolume&&this.state.currentVolume.trim().length>0}},{key:"_isAbvValid",value:function(){return null!==this.state.currentAbv&&this.state.currentAbv.trim().length>0}},{key:"_cancelSession",value:function(){this.props.cancelSession()}},{key:"_isOverSessionMax",value:function(){return this.props.sessionTotal>this.props.sessionMax}},{key:"_isOverWeeklyMax",value:function(){return this.props.rollingWeeklyTotal>this.props.rollingWeeklyMax}},{key:"_isOverRate",value:function(){return this.props.hourlyRate>this.props.hourlyRateMax}},{key:"render",value:function(){var e=this;return l.createElement("div",null,l.createElement("div",null,l.createElement("strong",null,"Add Drink")),l.createElement("div",{className:"add-drink"},l.createElement("div",null,l.createElement("strong",null,"Volume")),l.createElement("input",{type:"number",value:this.state.currentVolume,size:6,min:1,max:1750,name:"volume",onChange:function(t){return e._handleChangeVolume(t.target.value)}}),l.createElement("select",{value:this.state.currentVolumeUnit,onChange:function(t){return e._handleChangeUnit(t.target.value)}},l.createElement("option",{value:_.a.Ounces},"Ounces"),l.createElement("option",{value:_.a.Milliliters},"Milliliters")),l.createElement("div",null,l.createElement("strong",null,"ABV")),l.createElement("input",{type:"number",value:this.state.currentAbv,size:5,min:.1,max:99.9,step:.5,name:"maxPerWeekInput",onChange:function(t){return e._handleChangeAbv(t.target.value)}}),l.createElement("div",{className:"add-drink-button"},l.createElement("button",{className:this._isOverSessionMax()||this._isOverRate()||this._isOverWeeklyMax()?"btn btn-danger":"btn",onClick:this._addDrink.bind(this)},"Add"))),l.createElement("div",{className:"drinks"},l.createElement("div",null,l.createElement("strong",null,"Last Drink")),l.createElement("div",{className:"active-session-field-value"},this.props.lastDrink?l.createElement(m,{deleteDrink:this.props.deleteLastDrink,drink:this.props.lastDrink}):l.createElement("span",null,"--")),l.createElement("div",null,l.createElement("strong",null,"Next Drink")),l.createElement("div",{className:"active-session-field-value"},this.props.nextDrinkTime?l.createElement(h,{datetime:this.props.nextDrinkTime}):l.createElement("span",null,"--"))),l.createElement("div",{className:"stats"},l.createElement("div",null,l.createElement("strong",null,"Session Total")),l.createElement("div",{className:this._isOverSessionMax()?"active-session-field-value active-session-warning":"active-session-field-value",title:this._isOverSessionMax()?"Warning: Over maximum drinks per session.":""},l.createElement(u.a,{number:this.props.sessionTotal,decimalPlaces:1}),this._isOverSessionMax()?l.createElement("span",{className:"active-session-warning-icon"},l.createElement("strong",null,"!")):null),l.createElement("div",null,l.createElement("strong",null,"Session Remaining")),l.createElement("div",{className:this._isOverSessionMax()?"active-session-field-value active-session-warning":"active-session-field-value"},l.createElement(u.a,{number:this.props.sessionRemaining,decimalPlaces:1})),l.createElement("div",null,l.createElement("strong",null,"Rolling Hourly Rate")),l.createElement("div",{className:this._isOverRate()?"active-session-field-value active-session-warning":"active-session-field-value"},l.createElement(u.a,{number:this.props.hourlyRate,decimalPlaces:1})),l.createElement("div",null,l.createElement("strong",null,"Rolling Weekly Total")),l.createElement("div",{className:this._isOverWeeklyMax()?"active-session-field-value active-session-warning":"active-session-field-value"},l.createElement(u.a,{number:this.props.rollingWeeklyTotal,decimalPlaces:1})),l.createElement("div",null,l.createElement("strong",null,"Rolling Weekly Remaining")),l.createElement("div",{className:this._isOverWeeklyMax()?"active-session-field-value active-session-warning":"active-session-field-value"},l.createElement(u.a,{number:this.props.rollingWeeklyRemaining,decimalPlaces:1})),l.createElement("div",{className:"active-session-buttons"},l.createElement("button",{className:"btn",onClick:this.props.finishSession},"Finish Session"),l.createElement("button",{className:"btn btn-danger",onClick:this._cancelSession.bind(this)},"Cancel Session"))))}}]),s}(l.Component))},function(e,t,s){e.exports=s(43)},,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var n=s(0),i=s.n(n),a=s(18),o=s.n(a),l=(s(33),s(19)),r=(s(42),s(1)),_=s(2),c=function(){function e(t){Object(r.a)(this,e),this._storageService=void 0,this._weeklyMax=14,this._sessionMax=4,this._alcoholUnits=2,this._hours=1,this._historySessionsToKeep=60,this._storageService=t,this.weeklyMax=this._storageService.getNumber("WeeklyMax")||14,this.sessionMax=this._storageService.getNumber("SessionMax")||4,this.alcoholUnits=this._storageService.getNumber("AlcoholUnitsRate")||2,this.hours=this._storageService.getNumber("HoursRate")||1,this.historySessionsToKeep=this._storageService.getNumber("HistorySessionsToKeep")||60}return Object(_.a)(e,[{key:"updateSettings",value:function(e){this.weeklyMax=e.weeklyMax,this.sessionMax=e.sessionMax,this.hours=e.hours,this.alcoholUnits=e.alcoholUnits,this.historySessionsToKeep=e.historySessionsToKeep}},{key:"restoreDefaults",value:function(){this.weeklyMax=14,this.sessionMax=4,this.alcoholUnits=2,this.hours=1,this.historySessionsToKeep=60}},{key:"weeklyMax",get:function(){return this._weeklyMax},set:function(e){e!==this._weeklyMax&&(this._weeklyMax=e,this._storageService.put("WeeklyMax",e))}},{key:"sessionMax",get:function(){return this._sessionMax},set:function(e){e!==this._sessionMax&&(this._sessionMax=e,this._storageService.put("SessionMax",e))}},{key:"hours",get:function(){return this._hours},set:function(e){e!==this._hours&&(this._hours=e,this._storageService.put("HoursRate",e))}},{key:"alcoholUnits",get:function(){return this._alcoholUnits},set:function(e){e!==this._alcoholUnits&&(this._alcoholUnits=e,this._storageService.put("AlcoholUnitsRate",e))}},{key:"consumptionRate",get:function(){return this.alcoholUnits/this.hours}},{key:"historySessionsToKeep",set:function(e){e!==this._historySessionsToKeep&&(this._historySessionsToKeep=e,this._storageService.put("HistorySessionsToKeep",e))},get:function(){return this._historySessionsToKeep}}]),e}(),u=s(11),h=s(14),m=function(){function e(t){Object(r.a)(this,e),this._localStorageService=void 0,this._localStorageService=t}return Object(_.a)(e,[{key:"loadSession",value:function(){var e=this._localStorageService.getObject("ActiveSession");if(!e)return null;var t=new u.a(e.sessionMax,e.targetHourlyRate);return t.date=new Date(e.date),e.drinks.forEach((function(e){return t.addDrink(new h.a(e.volume,e.volumeUnit,e.abv,new Date(e.time)))})),t}},{key:"saveSession",value:function(e){var t={drinks:e.drinks.map((function(e){return{volume:e.volume,volumeUnit:e.volumeUnit,abv:e.abv,time:e.time.toString()}})),sessionMax:e.sessionMax,date:e.date.toString(),targetHourlyRate:e.targetHourlyRate};this._localStorageService.putObject("ActiveSession",t)}},{key:"deleteSession",value:function(){this._localStorageService.remove("ActiveSession")}}]),e}(),d=s(12),p=s(13),v=function(){function e(t,s){Object(r.a)(this,e),this._localStorageService=void 0,this._sessionsToKeep=void 0,this._localStorageService=t,this._sessionsToKeep=s}return Object(_.a)(e,[{key:"loadHistory",value:function(){var e=this._localStorageService.getObject("History");if(!e)return null;var t=e.historicSessions.map((function(e){return new p.a(e.unitsConsumed,new Date(e.date),e.sessionMax,e.weeklyMax,e.rollingWeekly)}));return new d.a(t)}},{key:"saveHistory",value:function(e){var t=e.sessions.length>this._sessionsToKeep?e.sessions.length-this._sessionsToKeep:0,s={historicSessions:e.sessions.slice(t,e.sessions.length).map((function(e){return{unitsConsumed:e.unitsConsumed,sessionMax:e.sessionMax,weeklyMax:e.weeklyMax,rollingWeekly:e.rollingWeekly,date:e.date.toString()}}))};this._localStorageService.putObject("History",s)}},{key:"deleteHistory",value:function(){this._localStorageService.remove("History")}},{key:"sessionsToKeep",set:function(e){this._sessionsToKeep=e},get:function(){return this._sessionsToKeep}}]),e}(),E=s(16),y=s.n(E),b=function(){function e(t){Object(r.a)(this,e),this._namespace=void 0,this._namespace=t}return Object(_.a)(e,[{key:"_key",value:function(e){return"".concat(this._namespace,".").concat(e)}},{key:"_zip",value:function(e){return y.a.compressToUTF16(e)}},{key:"_unzip",value:function(e){return null!==e?y.a.decompressFromUTF16(e):null}},{key:"getString",value:function(e){return this._unzip(localStorage.getItem(this._key(e)))}},{key:"getNumber",value:function(e){var t=this._unzip(localStorage.getItem(this._key(e)));return t?parseFloat(t):null}},{key:"getBoolean",value:function(e){var t=this._unzip(localStorage.getItem(this._key(e)));return t?"true"===t.toLocaleLowerCase():null}},{key:"put",value:function(e,t){localStorage.setItem(this._key(e),this._zip(t.toString()))}},{key:"getObject",value:function(e){var t=this._unzip(localStorage.getItem(this._key(e))),s=null;return t&&(s=JSON.parse(t)),s}},{key:"putObject",value:function(e,t){localStorage.setItem(this._key(e),this._zip(JSON.stringify(t)))}},{key:"remove",value:function(e){localStorage.removeItem(this._key(e))}}]),e}(),g=function(){function e(t){Object(r.a)(this,e),this._localStorageService=void 0,this._localStorageService=t}return Object(_.a)(e,[{key:"viewedHowToTab",get:function(){return this._localStorageService.getBoolean("ViewedHowToTab")||!1},set:function(e){this._localStorageService.put("ViewedHowToTab",e)}},{key:"acceptedDisclaimer",get:function(){return this._localStorageService.getBoolean("AcceptedDisclaimer")||!1},set:function(e){this._localStorageService.put("AcceptedDisclaimer",e)}}]),e}(),S=s(9),f=function(){function e(){Object(r.a)(this,e),this._settingsService=void 0,this._sessionService=void 0,this._historyService=void 0,this._mainStateService=void 0,this._installService=void 0;var t=new b("SL.Less-Tipsy");this._sessionService=new m(t),this._settingsService=new c(t),this._historyService=new v(t,this._settingsService.historySessionsToKeep),this._mainStateService=new g(t),this._installService=new S.b}return Object(_.a)(e,[{key:"sessionService",get:function(){return this._sessionService}},{key:"settingsService",get:function(){return this._settingsService}},{key:"historyService",get:function(){return this._historyService}},{key:"mainStateService",get:function(){return this._mainStateService}},{key:"installService",get:function(){return this._installService}}]),e}();var k=function(){var e=new f;return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Less Tipsy"),i.a.createElement(l.a,{settingsService:e.settingsService,sessionService:e.sessionService,historyService:e.historyService,mainStateService:e.mainStateService,installService:e.installService}))},M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var s=e.installing;null!=s&&(s.onstatechange=function(){"installed"===s.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(k,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/less-tipsy",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/less-tipsy","/service-worker.js");M?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(s){var n=s.headers.get("content-type");404===s.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):w(t,e)}))}}()}],[[28,1,2]]]);
//# sourceMappingURL=main.32495043.chunk.js.map